# 流程控制

流程指的就是程序执行的顺序，写过汇编的同学都知道，用汇编写程序的流程控制都是`jump`的，各种跳来跳去，这会导致程序的流程极其的不清楚，当出现`bug`时，极其的难以调试，我们称这种程序为“意大利面条”，意思就是像意大利面条一样交缠在一起，极其混乱。

后来人们发现，只需要三种结构就可以写出任何的程序，这三种结构就是**顺序结构，选择结构，循环结构**，使用这三种结构使得程序条理清晰，结构清晰。下面就详细的介绍这三种结构。

## 顺序结构

顺序结构指的就是程序从上到下，按照顺序执行，例如

```java
System.out.println("我是第一条语句");
System.out.println("我是第二条语句");
```

输出为

```java
我是第一条语句
我是第二条语句
```

## 选择结构

有时候我们需要根据某种状态来判断哪段程序应该执行，比如用户输入用户名和密码，根据是否输入正确来决定程序的行为。

选择结构分为两大类，一个与关键字`if,else`有关，一个与关键字`switch,case`有关，下面详细进行介绍。

### if-else语句

#### 单独一个if

使用方法为

```java
if (判断语句) {
    //代码
}
```

对判断语句进行判断，如果结果为真，则执行`if`里面的代码，如果为假，则跳过整个语句。

#### if-else语句

上面`if`语句是当结果为真时执行语句块，但是当结果为假却什么都不干，我们希望当结果为假时，也能有相应的操作，那么就要用到`if-else`语句

```java
if (判断语句) {
    //if语句块
} else {
    //else语句块
}
```

当结果为真时，执行`if`语句块，结果为假时，执行`else`语句块。

#### if-else-if else语句级联

有时候，我们不仅需要的是一次判断，而是多个判断，比如有一个分段函数，根据函数的不同取值，选择不同的函数，比如
$$
y = 
\begin{cases}
2x - 1, &x < 1 \\
2x, &1 \leq x < 2 \\
2x + 1, &x \geq 2
\end{cases}
$$

```java
if (x < 1) {
    y = 2 * x - 1;
} else if (1 <= x && x < 2) {
    y = 2 * x;
} else { //x >= 2
    y = 2 * x + 1
}
```

### switch-case语句

`switch-case`语句的格式为

```java
switch (表达式) {
    case 常量1:
        语句1;
        break;
    case 常量2:
        语句2;
        break;
    ...
    case 常量n:
        语句n;
        break;
    default:
        语句n+1;
        break;
}
```

该段程序的执行过程为，首先计算`switch`表达式的结果，然后将表达式的结果与`常量1,常量2,...`比较，看是否相等，如果与其中某个常量相等，则会执行相应的语句块。如果与所有的`case`常量都不相等，那么就会执行`default`中的语句。

**注意：**

- 多个`case`的常量不能相同
- `switch`表达式的结果只能是下面的几种类型
  - 基本数据类型：`byte,short,char,int`
  - 引用类型：`String`，枚举类型
- `case`的顺序可以发生改变

另外，比较重要的是，其实`break`不是必须的，可以省略，如果省略的话，由于没有`break`，程序会继续执行下去，直到遇到`break`或者程序执行结束。

```java
switch (1) {
    case 1:
        System.out.println(1); //不会退出程序，继续执行
    case 2:
        System.out.println(2); 
        break;                 //在这里遇到break，退出
    default:
        System.out.println(3);
        break;
}
```

程序的输出为

```java
1
2
```

## 循环结构

循环指的就是重复执行某段程序，一般循环由下面四部分组成

- 初始化
- 条件判断
- 循环体
- 循环控制语句

循环由三种，分别是

- `for`循环
- `while`循环
- `do-while`循环

下面详细介绍。

### for循环

`for`循环的格式为

```java
for (初始化语句; 条件判断; 循环控制) {
    循环体;
}
```

执行的顺序为，先执行初始化语句，然后进行条件判断，如果结果为真，那么进入循环体，如果结果为假，那么退出循环，执行完循环体后，接着执行循环控制语句，然后进行条件判断，循环往复。如下面的例子打印出`1-100`的和

```java
int sum = 0;
for (int i = 1; i <= 100; i++) { //注意，这个i只能在for循环里面用，在外面不能用
    sum = sum + i;
}
```

### while循环

`while`循环的格式为

```java
while (判断语句) {
    循环体
}
```

首先会对判断语句进行判断，真就执行循环体，假就退出循环。执行完循环体，接着进行判断，循环往复。下面的例子计算`1-100`的和

```java
int sum = 0;
int i = 1; //初始化语句
while (i <= 100) { //判断语句
    sum = sum + i; //循环体
    i++; //循环控制语句
}
```

### do-while循环

`do-while`循环的格式为

```java
do {
    循环体
} while (条件判断);
```

首先会执行一次循环体，然后进行条件判断，真就继续执行循环体，否则退出循环。



`do-while`循环与`while`循环的区别是，`do-while`一定会执行一次循环体，例如

```java
int i = -1;
do {
    System.out.println(1);
} while (i > 0);
```

输出为

```java
1
```

### 循环控制break和continue

当在循环体中执行到`break`时，会直接退出循环，如

```java
for (int i = 1; i <= 10; i++) {
    System.out.println(i);
    if (i == 2) {
        break;      //当i = 2时退出循环
    }
}
```

程序输出为

```java
1
2
```

当在循环体中执行到`continue`时，退出此次循环，直接进行下一次循环，如

```java
for (int i = 1; i <= 5; i++) {
    if (i == 3) {
        continue; //退出此次循环，后面的代码不执行了，直接执行循环控制语句i++，进入下一次循环
    }
    System.out.println(i);
}
```

输出为

```java
1
2
4
5
```

### 死循环

当循环一直进行下去，不能退出，那么就成为了死循环，例如下面就是一个死循环

```java
while (true) {
    System.out.println("Hello");
}
for (int i = 0; ; i++) { //省略了条件判断语句，默认为真，是死循环
    System.out.println(i);
}
for (int i = 0; i < 10; ) { //省略了循环控制语句，i一直为0，条件判断一直为真，为死循环
    System.out.println(i);
}
```

### 循环嵌套

循环里面可以嵌套着一个循环，例如输出九九乘法表

```java
for (int i = 1; i < 10; i++) {
    for (int j = 1; j <= i; j++) {
        System.out.printf("%d*%d=%2d  ",j,i,j*i); //类似于C语言，格式化输出，以便对齐
    }
    System.out.println();
}
```

输出为

```java
1*1= 1  
1*2= 2  2*2= 4  
1*3= 3  2*3= 6  3*3= 9  
1*4= 4  2*4= 8  3*4=12  4*4=16  
1*5= 5  2*5=10  3*5=15  4*5=20  5*5=25  
1*6= 6  2*6=12  3*6=18  4*6=24  5*6=30  6*6=36  
1*7= 7  2*7=14  3*7=21  4*7=28  5*7=35  6*7=42  7*7=49  
1*8= 8  2*8=16  3*8=24  4*8=32  5*8=40  6*8=48  7*8=56  8*8=64  
1*9= 9  2*9=18  3*9=27  4*9=36  5*9=45  6*9=54  7*9=63  8*9=72  9*9=81
```





